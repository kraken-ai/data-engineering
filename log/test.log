Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 23ms (Views: 23.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 23ms (Views: 23.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (17.5ms)
Completed 200 OK in 25ms (Views: 24.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (17.6ms)
Completed 200 OK in 25ms (Views: 24.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (18.7ms)
Completed 200 OK in 27ms (Views: 27.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 25ms (Views: 25.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 26ms (Views: 25.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 24ms (Views: 24.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (17.9ms)
Completed 200 OK in 27ms (Views: 26.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 3ms (Views: 2.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 11ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 10ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:34:49 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:35:06 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00]]
  [1m[36m (13.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:50:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:50:41 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:51:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "companies" WHERE "companies"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00]]
  [1m[36m (14.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[36m (20.7ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:52:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 10:52:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 10ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:01:22 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:04:12 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:04:55 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:05:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:05:39 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 10ms (Views: 10.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:08:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:08:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:10:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:10:43 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (21.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 2
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:15:23 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 2
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.0ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:17:32 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:17:32 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:17:32 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:17:32 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 2
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:18:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 2
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:20:04 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:20:04 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:21:04 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:21:04 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.7ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:23:42 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:23:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:24:36 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:24:36 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:29:16 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:29:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.7ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:29:46 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:29:46 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:29:47 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:29:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:29:47 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:29:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.8ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:31:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:31:24 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:31:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:24 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:31:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:31:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 10ms (Views: 10.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:32:25 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 10ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:33:10 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.3ms)
Completed 200 OK in 11ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (5.1ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:40:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (4.9ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:41:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:47:34 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.6ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:48:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:48:41 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" IS NULL LIMIT 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:50:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.7ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:51:44 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:52:07 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 11:52:13 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 11ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:04:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 10ms (Views: 9.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:26:16 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 11ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:29:03 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.9ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:47:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:51:42 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 11ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:52:29 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 11ms (Views: 10.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 13:52:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
  Rendered file_upload/new.html.erb within layouts/application (2.5ms)
Completed 200 OK in 11ms (Views: 10.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.6ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.9ms)
Completed 200 OK in 47ms (Views: 14.3ms | ActiveRecord: 19.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (19.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.9ms)
Completed 200 OK in 48ms (Views: 14.3ms | ActiveRecord: 20.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.6ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.9ms)
Completed 200 OK in 47ms (Views: 13.9ms | ActiveRecord: 19.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (20.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (6.2ms)
Completed 200 OK in 50ms (Views: 15.5ms | ActiveRecord: 21.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.7ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.7ms)
Completed 200 OK in 46ms (Views: 13.7ms | ActiveRecord: 19.7ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:03:17 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.3ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.5ms)
Completed 200 OK in 46ms (Views: 13.3ms | ActiveRecord: 19.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.8ms)
Completed 200 OK in 46ms (Views: 13.6ms | ActiveRecord: 19.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.7ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.7ms)
Completed 200 OK in 47ms (Views: 13.4ms | ActiveRecord: 19.8ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (20.9ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.8ms)
Completed 200 OK in 50ms (Views: 14.3ms | ActiveRecord: 22.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007ff8beb71e48 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8090-1wq1ot5>>}}
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (19.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.6ms)
Completed 200 OK in 47ms (Views: 13.6ms | ActiveRecord: 20.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007fa69e7c5fc8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8118-u4su6n>>}}
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:09:30 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (20.0ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.9ms)
Completed 200 OK in 49ms (Views: 14.3ms | ActiveRecord: 21.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007fd5c80532a0 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8135-1vb3fb4>>}}
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.0ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:10:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (19.7ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.6ms)
Completed 200 OK in 49ms (Views: 14.1ms | ActiveRecord: 20.9ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007fdbc2f48cd8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8175-5robuy>>}}
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.5ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.4ms)
Completed 200 OK in 48ms (Views: 30.5ms | ActiveRecord: 3.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>"test1.tab", "file"=>#<Rack::Test::UploadedFile:0x007fbe1f81ed38 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8237-1375py7>>}}
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.6ms)
Completed 200 OK in 48ms (Views: 14.1ms | ActiveRecord: 3.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>"test1.tab", "file_upload"=>#<Rack::Test::UploadedFile:0x007fa6dfb39268 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8269-13r4bno>>}}
Completed 200 OK in 3ms (Views: 1.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.8ms)
Completed 200 OK in 47ms (Views: 30.7ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007f9a27335310 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8303-78ircd>>}}
Completed 200 OK in 3ms (Views: 1.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.7ms)
Completed 200 OK in 46ms (Views: 29.4ms | ActiveRecord: 3.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"post"=>{"filename"=>#<Rack::Test::UploadedFile:0x007fa125b93458 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8333-1s2gqnb>>}}
Completed 200 OK in 22932ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.3ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.6ms)
Completed 200 OK in 46ms (Views: 29.0ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>{"filename"=>#<Rack::Test::UploadedFile:0x007f942ed71030 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8362-1ehl0ho>>}}
Completed 500 Internal Server Error in 27787ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.2ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.6ms)
Completed 200 OK in 46ms (Views: 29.5ms | ActiveRecord: 3.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fcc97b5f480 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8390-or0upx>>}
Completed 500 Internal Server Error in 13381ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.3ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.5ms)
Completed 200 OK in 49ms (Views: 31.4ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fbe953b4b50 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8441-1i7pbeo>>}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:20 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:17:20 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:41:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:16:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__4131699015377411018__process_action__4005489988506872837__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__1362921601056542871__setup__3782261237805315171__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 2493ms (Views: 1.5ms | ActiveRecord: 3.9ms)
  [1m[36m (2.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:17:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (18.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered file_upload/complete.html.erb within layouts/application (5.8ms)
Completed 200 OK in 46ms (Views: 13.7ms | ActiveRecord: 19.5ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 3ms (Views: 2.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fa1cde767d0 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8476-oq9o8>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:17:56 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:17:56 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:39:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:14:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__4492416384311062855__process_action__2875072415548231050__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__917040184626872163__setup__824989397863240871__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 59ms (Views: 1.5ms | ActiveRecord: 4.3ms)
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 15ms (Views: 10.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.2ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 35ms (Views: 2.1ms | ActiveRecord: 3.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fe25953c9b8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8529-1iu0qc5>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:20 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:19:20 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:39:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:14:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__1491880861487596268__process_action__3527800485471814266__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__2580186103856940325__setup__3979960418602123805__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 61ms (Views: 1.5ms | ActiveRecord: 4.1ms)
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:19:26 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 16ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.3ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 36ms (Views: 2.2ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fee2ffd9650 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8547-1i1mvxw>>}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:19:28 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:19:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:39:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:14:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__221280406862993846__process_action__1371954132573238708__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__3102711717884012988__setup__2064254468040997846__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 58ms (Views: 1.5ms | ActiveRecord: 4.0ms)
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["item_count", 2], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:23:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 16ms (Views: 10.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.7ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 38ms (Views: 2.2ms | ActiveRecord: 3.9ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fbf4e7c9880 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8649-1v6zz89>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:23:33 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:23:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:41:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:16:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__2588782960978132822__process_action__3503172778203076577__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__4028772182746500529__setup__2702545199518985004__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 58ms (Views: 1.5ms | ActiveRecord: 4.0ms)
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "Vail"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" = 1 LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["open_id", 99999], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "ibm"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["open_id", "12345"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "apple"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "joe"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00], ["name", "jane"], ["updated_at", Tue, 12 Mar 2013 14:32:02 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 16ms (Views: 10.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.3ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 38ms (Views: 2.3ms | ActiveRecord: 3.4ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007f8f3b8353c0 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130312-8858-1eiopi6>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.0ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 12 Mar 2013 14:32:04 MDT -06:00], ["open_id", 1], ["updated_at", Tue, 12 Mar 2013 14:32:04 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:47:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:16:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__1832566401029285866__process_action__1262500094185839717__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__2406686812652669497__setup__2214795390806028980__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 60ms (Views: 1.5ms | ActiveRecord: 3.9ms)
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 14:31:19 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 16ms (Views: 10.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.4ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 38ms (Views: 2.2ms | ActiveRecord: 3.5ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fb1fd6cc5f8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-11578-1oo31aj>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:31:21 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 14:31:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:47:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:16:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__3689855593535349760__process_action__3660860236703131039__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__1387142612493323705__setup__3072362468494542908__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 59ms (Views: 1.5ms | ActiveRecord: 3.8ms)
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 14:34:59 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (21.6ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 14:35:00 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 17ms (Views: 11.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
  [1m[35mCompany Load (2.5ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
Completed 200 OK in 41ms (Views: 2.2ms | ActiveRecord: 3.6ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#new as HTML
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007f83bf150d98 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-11978-1gbm8ht>>}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 14:35:02 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 14:35:02 MDT -06:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:47:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:16:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:414:in `_run__2530810432755701485__process_action__4330007551296051484__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:16:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:458:in `_run__43258864871993321__setup__1627430457296495518__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
Completed 200 OK in 73ms (Views: 1.6ms | ActiveRecord: 4.0ms)
  [1m[36m (1.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
Completed 200 OK in 3ms (Views: 2.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:20:35 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007f9177c45b98 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-12744-1iscqh5>>}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (26.6ms)
Completed 500 Internal Server Error in 40ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#complete as HTML
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#new as HTML
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fda0e2ce8c8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-12787-nhx7qu>>}
Completed 500 Internal Server Error in 0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (1.1ms)
Completed 200 OK in 39ms (Views: 39.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (2.3ms)
Completed 200 OK in 16ms (Views: 15.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:29:28 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (3.8ms)
Completed 500 Internal Server Error in 37ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:29:54 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (24.5ms)
Completed 500 Internal Server Error in 37ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (2.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:37:57 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (3.5ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.8ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:38:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (3.3ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.1ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:39:24 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$xhfWaI.6sVNYPS8ZQAI2uegwuQeBYOdIhGaAh1KLMlAEjYAKoS0yS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered file_upload/new.html.erb within layouts/application (2.7ms)
  Rendered shared/_login_logout.html.erb (0.7ms)
Completed 200 OK in 50ms (Views: 36.3ms | ActiveRecord: 0.1ms)
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$vcRvRraCbVqoP71NniZ5les9oTFSyduvFV0n2fuY1G6mvYXGvwvyK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#complete as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$XaEBs5RCvvkRiFxUpylUf.JTH5tb65jvwMZ4F6tQ/K6V1AXcqhX3W"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$7ihS2JbGJHu1TInS8h3eUeBhlL8oDO.rQ9NQGn3HFG8GIbsFenpSK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007feef182f2e8 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-13217-1vx3626>>}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 15:39:27 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:49:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:18:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:425:in `_run__1306309114644766939__process_action__3626325037747957383__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `block in process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `catch'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `_catch_warden'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:21:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:480:in `_run__3518872973139805408__setup__2990840511879753453__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 61ms (Views: 2.2ms | ActiveRecord: 1.5ms)
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (3.2ms)
Completed 500 Internal Server Error in 6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.2ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:40:18 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$FdwDWDMLozJWWtKaow8tQOmrgtp6UWKxmnS5Zyk0YLE.3nis5CSVe"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered file_upload/new.html.erb within layouts/application (3.1ms)
  Rendered shared/_login_logout.html.erb (0.7ms)
Completed 200 OK in 53ms (Views: 37.9ms | ActiveRecord: 0.1ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$MqJr1/7eLWkJCGnUOR9ReeCKyV2.AaUzptf7eutgPvTkXFDMNX0fa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#complete as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 2.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$/N9DfbU.m7JP3ssiDpt7venG7YJLW4X/40rkpYHDOmqJjsg79Ult6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$p25wkvv7b.DpZiIj1myK2uRy1AykUOIqxWdNDA/1QyFhu79bBtqBa"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fc592b4d458 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-13275-s5l2fa>>}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 15:40:21 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:49:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:18:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:425:in `_run__729518462418172355__process_action__1930464146087664421__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `block in process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `catch'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `_catch_warden'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:21:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:480:in `_run__638480294761915817__setup__155318547723583993__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 62ms (Views: 2.1ms | ActiveRecord: 1.5ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:43:31 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$x/Dps6EYn3Ains8jfYZ4Cu5qxZro7ZMa1d8bpSTqIaRlHE/wvOoAC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered file_upload/new.html.erb within layouts/application (2.6ms)
  Rendered shared/_login_logout.html.erb (0.7ms)
Completed 200 OK in 48ms (Views: 34.8ms | ActiveRecord: 0.1ms)
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$pYeT8qTsR9frTABqD/iIaeHFpcIQ3rbGXzRuycLCvkUbK5Hi7tNP6"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#complete as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 5ms (Views: 2.8ms | ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$VcnN1WTZLpwrq3PgbncRlefJochyTGPKhdL1RJtaABeg3T/t33Cle"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered shared/_login_logout.html.erb (0.2ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$62vS6eEKqAJ2Y2qOviNQsea572zAIb6jLUd8HsPS9kFaNdCMCP.eK"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fb2f2386470 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-13328-1p6d4q1>>}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 15:43:33 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:49:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:18:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:425:in `_run__2307175775364194646__process_action__3996873177878662019__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `block in process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `catch'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `_catch_warden'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:21:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:480:in `_run__56987476132961923__setup__1437433018029204241__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 61ms (Views: 2.1ms | ActiveRecord: 1.5ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 4.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:47:05 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:07 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$gL3hz.1fYgx5e3EjxE/c5eV.w2YThKFdjxlnAMymiLJeQ.oXPJxla"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:47:07 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered file_upload/new.html.erb within layouts/application (2.9ms)
  Rendered shared/_login_logout.html.erb (0.7ms)
Completed 200 OK in 50ms (Views: 36.1ms | ActiveRecord: 0.1ms)
  [1m[35m (2.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$nT6FoAAQyCW4Jgub/B0LBevXxPRD54itBAMXwKXWQRaBwrRe.ML2e"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#complete as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 6ms (Views: 2.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$jOsrFlMlfWDtVNhWqZRxl.sKeHumrllEy7698T8KSPrL5dmfwO5Xi"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$nS2XWZ0uahBlFqO9m7Xh/u5.cZJQreKoQmsvEHlyDBLvDFNbF5K/i"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007f84b3b3de88 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-13425-y2flmx>>}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 15:47:08 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:49:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:18:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:425:in `_run__2723787700115066253__process_action__21159843522682838__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `block in process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `catch'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `_catch_warden'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:21:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:480:in `_run__314918600340033180__setup__1474078673092240674__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.0ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 63ms (Views: 2.0ms | ActiveRecord: 1.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (2.5ms)
Completed 200 OK in 5ms (Views: 4.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (5.3ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street, Vail, CO"], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "Vail"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["description", "3 for 1 ski trip, $99"], ["merchant_id", 1], ["price", 99.0], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["item_count", 1], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1[0m
  [1m[35mItem Load (0.2ms)[0m  SELECT "items".* FROM "items" WHERE "items"."id" IN (1)
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["open_id", 99999], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mMerchant Load (0.0ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.0ms)[0m  SELECT "items".* FROM "items" 
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" = 'apple' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["description", "bar"], ["merchant_id", 1], ["price", 22.23], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "items" WHERE "items"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)[0m  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "234 second street"], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "ibm"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "merchants" WHERE "merchants"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 2[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mMerchant Load (0.1ms)[0m  [1mSELECT "merchants".* FROM "merchants" [0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mCompany Load (0.0ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["open_id", "12345"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "merchants" ("address", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["address", "123 first street"], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "apple"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "items" ("created_at", "description", "merchant_id", "price", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["description", "foo"], ["merchant_id", 1], ["price", 99.95], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mItem Load (0.1ms)[0m  [1mSELECT "items".* FROM "items" WHERE "items"."description" = 'foo' LIMIT 1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" WHERE "purchasers"."name" = 'joe' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "orders" ("company_id", "created_at", "item_count", "item_id", "purchaser_id", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["company_id", 1], ["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["item_count", 0], ["item_id", 1], ["purchaser_id", 1], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" 
  [1m[36mOrder Load (0.1ms)[0m  [1mSELECT "orders".* FROM "orders" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "orders" WHERE "orders"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "orders" WHERE "orders"."id" = 2[0m
  [1m[35mMerchant Load (0.0ms)[0m  SELECT "merchants".* FROM "merchants" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "merchants" WHERE "merchants"."id" = 1[0m
  [1m[35mItem Load (0.1ms)[0m  SELECT "items".* FROM "items" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "items" WHERE "items"."id" = 1[0m
  [1m[35mPurchaser Load (0.0ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" 
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "companies" WHERE "companies"."id" = 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.0ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "joe"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchasers" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00], ["name", "jane"], ["updated_at", Wed, 13 Mar 2013 15:55:47 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mPurchaser Load (0.1ms)[0m  SELECT "purchasers".* FROM "purchasers" 
  [1m[36mPurchaser Load (0.1ms)[0m  [1mSELECT "purchasers".* FROM "purchasers" [0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "purchasers" WHERE "purchasers"."id" = 1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "purchasers" WHERE "purchasers"."id" = 2[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$rPQ8ZVoJgwe8j0K/0BKZMeZQZLb6JJ0j83vmMqO1xckhmMG2MgDmy"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>nil}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered file_upload/new.html.erb within layouts/application (2.9ms)
  Rendered shared/_login_logout.html.erb (0.6ms)
Completed 200 OK in 51ms (Views: 36.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1
Binary data inserted for `string` type on column `encrypted_password`
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$7Py2uILFh.iClt3pDWoYZu7mUloFIaTt.iWVDLzSIJLZmzOfMaPBC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by FileUploadController#complete as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mCompany Load (0.1ms)[0m  SELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1  [["id", 1]]
coulnd't find that company, probably not setup yet...
  Rendered shared/_login_logout.html.erb (0.4ms)
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$MXyFZeX3xVzDYBUOGFN5m.pzcgN7xLyKpRV1XErNgkeNjNwagNubG"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered shared/_login_logout.html.erb (0.2ms)
Completed 200 OK in 3ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" LIMIT 1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "users" WHERE "users"."email" = 'test@user.com' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "test@user.com"], ["encrypted_password", "$2a$04$O3/AV6qCYtOfdWO38hQ7WOpSe5gQrN3rPOkQolG.VppexeVnZHL12"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by FileUploadController#create as HTML
  Parameters: {"filename"=>#<Rack::Test::UploadedFile:0x007fb7aa208c30 @content_type="text/plain", @original_filename="test1.tab", @tempfile=#<File:/var/folders/cs/hrngcf010gj53fgg3vgdndzc0000gn/T/test1.tab20130313-13597-1e1suns>>}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "companies" ("created_at", "open_id", "updated_at") VALUES (?, ?, ?)  [["created_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00], ["open_id", 1], ["updated_at", Wed, 13 Mar 2013 15:55:50 MDT -06:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMerchant Load (0.1ms)[0m  SELECT "merchants".* FROM "merchants" WHERE "merchants"."name" IS NULL LIMIT 1
ERROR: couldn't save translated CSV data
["/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:10:in `block in create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `each'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/models/item.rb:7:in `create_items'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:49:in `persist_object_graph'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/app/controllers/file_upload_controller.rb:18:in `create'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:4:in `send_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:425:in `_run__3159262615205636832__process_action__580030820540898374__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/activerecord-3.2.12/lib/active_record/railties/controller_runtime.rb:18:in `process_action'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:473:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:49:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `block in process'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `catch'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:72:in `_catch_warden'", "/usr/local/lib/ruby/gems/1.9.1/gems/devise-2.2.3/lib/devise/test_helpers.rb:19:in `process'", "/usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.12/lib/action_controller/test_case.rb:395:in `post'", "/Users/kraken/Information_Center/ruby/apps/ls_test/ls_challenge/test/functional/file_upload_controller_test.rb:21:in `block in <class:FileUploadControllerTest>'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:949:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit/testcase.rb:17:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:36:in `block in run'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:480:in `_run__1334784489805144574__setup__2772540399395405625__callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'", "/usr/local/lib/ruby/gems/1.9.1/gems/activesupport-3.2.12/lib/active_support/testing/setup_and_teardown.rb:35:in `run'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:91:in `block in _run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:84:in `_run_suite'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `block in _run_suites'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `map'", "/usr/local/lib/ruby/gems/1.9.1/gems/turn-0.9.6/lib/turn/runners/minirunner.rb:61:in `_run_suites'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:746:in `_run_anything'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:909:in `run_tests'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:896:in `block in _run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `each'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:895:in `_run'", "/usr/local/lib/ruby/1.9.1/minitest/unit.rb:884:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:21:in `run'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:326:in `block (2 levels) in autorun'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:27:in `run_once'", "/usr/local/lib/ruby/1.9.1/test/unit.rb:325:in `block in autorun'"]
  [1m[36mCompany Load (0.1ms)[0m  [1mSELECT "companies".* FROM "companies" WHERE "companies"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mOrder Load (0.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."company_id" = 1
  Rendered shared/_login_logout.html.erb (0.3ms)
Completed 200 OK in 62ms (Views: 2.0ms | ActiveRecord: 1.5ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by WelcomeController#index as HTML
  Rendered shared/_login_logout.html.erb (2.1ms)
Completed 200 OK in 5ms (Views: 4.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
